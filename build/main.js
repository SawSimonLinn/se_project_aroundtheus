!function(){"use strict";var e=class{constructor(e,t,s,n,i){this._name=e.name,this._link=e.link,this._id=e._id,this.isLiked=e.isLiked,this._cardSelector=t,this._handleCardImageClick=s,this._handleDeleteClick=n,this._handleLikeClick=i}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card__list-item").cloneNode(!0)}_setEventListeners(){this._likeButton.addEventListener("click",(()=>this._handleLikeClick(this))),this._deleteButton.addEventListener("click",(()=>this._handleDeleteClick(this))),this._cardImageElement.addEventListener("click",(()=>{this._handleCardImageClick({name:this._name,link:this._link})}))}renderLikes(){this.isLiked?this._likeButton.classList.add("card__like-button_active"):this._likeButton.classList.remove("card__like-button_active")}toggleLike(){this._likeButton.classList.toggle("card__like-button_active")}handleDeleteCard(){this._cardElement.remove(),this._cardElement=null}getCardElement(){return this._cardElement=this._getTemplate(),this._likeButton=this._cardElement.querySelector("#card__like-button"),this._deleteButton=this._cardElement.querySelector("#card__delete-button"),this._cardImageElement=this._cardElement.querySelector("#card__image"),this._cardTitleElement=this._cardElement.querySelector("#card__title"),this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,this._cardTitleElement.textContent=this._name,this.renderLikes(),this._setEventListeners(),this._cardElement}},t=class{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t}_showInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formElement.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}disableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_enableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(e){return!e.every((e=>e.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputElements)?this.disableButton():this._enableButton()}_setEventListeners(){this._inputElements=[...this._formElement.querySelectorAll(this._inputSelector)],this._submitButton=this._formElement.querySelector(this._submitButtonSelector),this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState(this._inputElements)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this._toggleButtonState(),this._inputElements.forEach((e=>{this._hideInputError(e)}))}},s=class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}renderer(e){this._renderer(e)}addItem(e){this._container.prepend(e)}},n=class{constructor(e){let{popupSelector:t}=e;this.popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this.popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this.popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose=e=>{"Escape"===e.key&&this.close()};setEventListeners(){this.popupElement.addEventListener("click",(e=>{(e.target.classList.contains("modal_opened")||e.target.classList.contains("modal__close-button"))&&this.close()}))}},i=class extends n{constructor(e,t){super({popupSelector:e}),this._form=this.popupElement.querySelector(".modal__form"),this._inputList=this._form.querySelectorAll(".modal__input"),this._handleFormSubmit=t,this._submitButton=this._form.querySelector(".modal__button")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}reset(){this._form.reset()}setSubmitButtonText(e){this._submitButton.textContent=e}};const r=document.querySelectorAll(".modal__form"),o=document.querySelector("#profile__edit-button"),a=document.querySelector(".profile__container"),l=document.querySelector("#profile__add-card-button"),c=document.querySelector("[name='name']"),h=document.querySelector("[name='about']"),d={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible",modalSpan:".modal__span"},u=new class{constructor(e){let{baseUrl:t,headers:s}=e;this._baseUrl=t,this._headers=s}checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this.checkResponse)}editProfile(e){return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this.checkResponse)}editProfileImage(e){return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.link})}).then(this.checkResponse)}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this.checkResponse)}addCard(e){let{name:t,link:s}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})}).then(this.checkResponse)}removeCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this.checkResponse)}likeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers}).then(this.checkResponse)}disLikeCard(e){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers}).then(this.checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"1abbe3bb-ec4a-49b1-8cc7-97fb0e8300a6","Content-Type":"application/json"}}),_=new class{constructor(e,t){this._container=document.querySelector(e),this._icon=document.querySelector(t)}showIcon(){this._icon.style.display="inline-block"}hideIcon(){this._icon.style.display="none"}setEventListeners(){this._container.addEventListener("mouseenter",this.showIcon.bind(this)),this._container.addEventListener("mouseleave",this.hideIcon.bind(this))}}(".profile__container",".profile__edit-icon"),m=new class extends n{constructor(e,t){super({popupSelector:e}),this._form=this.popupElement.querySelector(".modal__form"),this._submitButton=this._form.querySelector(".modal__button"),this._handleFormSubmit=t}setSubmitAction(e){this._handleFormSubmit=e}setSubmitButtonText(e){this._submitButton.textContent=e}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}}("#delete__modal",g),p=new i("#profile-image-modal",(function(e){p.setSubmitButtonText("Saving...."),u.editProfileImage(e).then((e=>{v.setUserAvatar(e),p.close(),B["profile-image-form"].disableButton(),p.reset()})).catch((e=>{console.error(e)})).finally((()=>{p.setSubmitButtonText("Save")}))})),E=new i("#profile__edit-modal",(function(e){E.setSubmitButtonText("Saving...."),u.editProfile({name:e.name,about:e.about}).then((e=>{let{name:t,about:s}=e;v.setUserInfo({name:t,about:s}),E.close()})).catch((e=>{console.error(e)})).finally((()=>{E.setSubmitButtonText("Save")}))})),b=new i("#add-card-modal",(function(e){b.setSubmitButtonText("Saving...."),u.addCard({name:e.name,link:e.link}).then((e=>{let{name:t,link:s,_id:n}=e;S.addItem(k({name:t,link:s,_id:n})),b.close(),B["card-form"].disableButton(),b.reset()})).catch((e=>{console.error(e)})).finally((()=>{b.setSubmitButtonText("Save")}))})),f=new class extends n{constructor(e){super({popupSelector:e}),this._image=this.popupElement.querySelector(".modal__image"),this._caption=this.popupElement.querySelector(".modal__caption")}open(e){let{name:t,link:s}=e;this._image.src=s,this._image.alt=t,this._caption.textContent=t,super.open()}}("#preview__image-modal");m.setEventListeners(),p.setEventListeners(),E.setEventListeners(),b.setEventListeners(),_.setEventListeners(),f.setEventListeners();const v=new class{constructor(e){let{nameElement:t,aboutElement:s,avatarElement:n}=e;this._nameElement=document.querySelector(t),this._aboutElement=document.querySelector(s),this._avatarElement=document.querySelector(n)}getUserInfo(){return this._userInfo={name:this._nameElement.textContent,about:this._aboutElement.textContent},this._userInfo}setUserInfo(e){let{name:t,about:s}=e;this._nameElement.textContent=t,this._aboutElement.textContent=s}setUserAvatar(e){let{avatar:t}=e;this._avatarElement.src=t}}({nameElement:"#profile__title",aboutElement:".profile__description",avatarElement:".profile__image"});let S;function k(t){return new e(t,"#card__template",C,g,y).getCardElement()}function L(e){const t=k(e);S.addItem(t)}function C(e){f.open(e)}function g(e){m.open(),m.setSubmitAction((()=>{m.setSubmitButtonText("Deleting...."),u.removeCard(e._id).then((()=>{e.handleDeleteCard(),m.close()})).catch((e=>{console.error(e)})).finally((()=>{m.setSubmitButtonText("Delete")}))}))}function y(e){e.isLiked&&u.disLikeCard(e._id).then((()=>{e.toggleLike(),e.isLiked=!1})).catch((e=>{console.error(e)})),e.isLiked||u.likeCard(e._id).then((()=>{e.toggleLike(),e.isLiked=!0})).catch((e=>{console.error(e)}))}u.getUserInfo().then((e=>{v.setUserInfo({name:e.name,about:e.about}),v.setUserAvatar({avatar:e.avatar})})).catch((e=>{console.error(e)})),u.getInitialCards().then((e=>{S=new s({items:e,renderer:L},"#card__list"),S.renderItems()})).catch((e=>{console.error(e)})),o.addEventListener("click",(()=>{const e=v.getUserInfo();c.value=e.name,h.value=e.about,B["profile-form"].resetValidation(),E.open()})),l.addEventListener("click",(()=>{b.open()})),a.addEventListener("click",(()=>{p.open()}));const B={};(e=>{e.forEach((e=>{const s=new t(d,e);s.enableValidation(),B[e.getAttribute("name")]=s}))})(r)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVFDLE1BQU1GLEVBQUksR0FHMUIsQ0F6R0FqRCxFQUNHWSxjQUNBRSxNQUFNMkQsSUFDTDVCLEVBQVNTLFlBQVksQ0FDbkJ6SyxLQUFNNEwsRUFBUzVMLEtBQ2Z1SSxNQUFPcUQsRUFBU3JELFFBRWxCeUIsRUFBU0MsY0FBYyxDQUFFdkIsT0FBUWtELEVBQVNsRCxRQUFTLElBRXBEeUIsT0FBT0MsSUFDTkMsUUFBUUMsTUFBTUYsRUFBSSxJQUt0QmpELEVBQ0d3QixrQkFDQVYsTUFBTXhJLElBQ0xrTCxFQUFjLElBQUlrQixFQUNoQixDQUNFcEgsTUFBT2hGLEVBQ1BpRixTQUFVK0csR0FFWixlQUdGZCxFQUFZN0YsYUFBYSxJQUUxQnFGLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFtRnRCdkQsRUFBa0I3RixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNOEssRUFBYzlCLEVBQVNqQyxjQUM3QmYsRUFBVVIsTUFBUXNGLEVBQVk5TCxLQUM5QmlILEVBQVdULE1BQVFzRixFQUFZdkQsTUFDL0IyQixFQUFlLGdCQUFnQjVGLGtCQUMvQmtHLEVBQWdCakYsTUFBTSxJQUl4QndCLEVBQWMvRixpQkFBaUIsU0FBUyxLQUN0QzBKLEVBQWFuRixNQUFNLElBSXJCdUIsRUFBZ0I5RixpQkFBaUIsU0FBUyxLQUN4QzhJLEVBQWtCdkUsTUFBTSxJQXlFMUIsTUFBTTJFLEVBQWlCLENBQUMsRUFDRXRELEtBQ3hCQSxFQUFTMUMsU0FBU2pDLElBQ2hCLE1BQU04SixFQUFZLElBQUlDLEVBQWNoSyxFQUFRQyxHQUM1QzhKLEVBQVU1SCxtQkFDVitGLEVBQWVqSSxFQUFZZ0ssYUFBYSxTQUFXRixDQUFTLEdBQzVELEVBR0o1SCxDQUFpQnlDLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qcm9maWxlRWRpdEltYWdlLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb21maXJtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuXG4gIGNoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaykge1xuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZWRpdFByb2ZpbGUocmVzKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lOiByZXMubmFtZSxcbiAgICAgICAgYWJvdXQ6IHJlcy5hYm91dCxcbiAgICAgIH0pLFxuICAgIH0pLnRoZW4odGhpcy5jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGVkaXRQcm9maWxlSW1hZ2UoaW5wdXRWYWx1ZXMpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IGlucHV0VmFsdWVzLmxpbmsgfSksXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZ2V0SW5pdGlhbENhcmRzKCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgYWRkQ2FyZCh7IG5hbWUsIGxpbmsgfSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBuYW1lLFxuICAgICAgICBsaW5rLFxuICAgICAgfSksXG4gICAgfSkudGhlbih0aGlzLmNoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBsaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkaXNMaWtlQ2FyZChjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KS50aGVuKHRoaXMuY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBpO1xuIiwiY2xhc3MgQ2FyZCB7XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNhcmREYXRhLFxuICAgIGNhcmRTZWxlY3RvcixcbiAgICBoYW5kbGVDYXJkSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKSB7XG4gICAgdGhpcy5fbmFtZSA9IGNhcmREYXRhLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGNhcmREYXRhLmxpbms7XG4gICAgdGhpcy5faWQgPSBjYXJkRGF0YS5faWQ7XG4gICAgdGhpcy5pc0xpa2VkID0gY2FyZERhdGEuaXNMaWtlZDtcblxuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2VDbGljayA9IGhhbmRsZUNhcmRJbWFnZUNsaWNrO1xuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrID0gaGFuZGxlRGVsZXRlQ2xpY2s7XG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xuICB9XG5cbiAgLy8gR2V0IHRoZSBjYXJkIHRlbXBsYXRlXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpc3QtaXRlbVwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8vIFNldCBldmVudCBsaXN0ZW5lcnNcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgICB0aGlzLl9oYW5kbGVMaWtlQ2xpY2sodGhpcylcbiAgICApO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT5cbiAgICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNsaWNrKHRoaXMpXG4gICAgKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkSW1hZ2VDbGljayh7XG4gICAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckxpa2VzKCkge1xuICAgIGlmICh0aGlzLmlzTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICAgIH1cbiAgfVxuXG4gIHRvZ2dsZUxpa2UoKSB7XG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5jbGFzc0xpc3QudG9nZ2xlKFwiY2FyZF9fbGlrZS1idXR0b25fYWN0aXZlXCIpO1xuICB9XG5cbiAgaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XG4gIH1cblxuICBnZXRDYXJkRWxlbWVudCgpIHtcbiAgICAvLyBDcmVhdGUgdGhlIGNhcmQgZWxlbWVudFxuICAgIHRoaXMuX2NhcmRFbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcblxuICAgIC8vIEdldCB0aGUgY2FyZCBlbGVtZW50c1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfX2xpa2UtYnV0dG9uXCIpO1xuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNjYXJkX19kZWxldGUtYnV0dG9uXCJcbiAgICApO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfX2ltYWdlXCIpO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsZW1lbnQgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmRfX3RpdGxlXCIpO1xuXG4gICAgLy8gIFNldCB0aGUgY2FyZCBkYXRhXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsZW1lbnQuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkVGl0bGVFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcblxuICAgIHRoaXMucmVuZGVyTGlrZXMoKTtcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IENhcmQ7XG4iLCJjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBgIyR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmBcbiAgICApO1xuXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBlcnJvck1lc3NhZ2VFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIGAjJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxuICAgICk7XG5cbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KSB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2VuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XG4gICAgcmV0dXJuICFpbnB1dExpc3QuZXZlcnkoKGlucHV0RWxlbWVudCkgPT4gaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKTtcbiAgfVxuXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxlbWVudHMpKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gIH1cblxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFtcbiAgICAgIC4uLnRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvciksXG4gICAgXTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3JcbiAgICApO1xuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKHRoaXMuX2lucHV0RWxlbWVudHMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGUpID0+IHtcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICByZXNldFZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBGb3JtVmFsaWRhdG9yO1xuIiwiY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICByZW5kZXJlcihpdGVtKSB7XG4gICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTZWN0aW9uO1xuIiwiY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG4gIGNsb3NlKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9O1xuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMucG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoXG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfb3BlbmVkXCIpIHx8XG4gICAgICAgIGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwibW9kYWxfX2Nsb3NlLWJ1dHRvblwiKVxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cDtcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5jbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLnBvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KHRoaXMuX2dldElucHV0VmFsdWVzKCkpO1xuICAgIH0pO1xuICB9XG5cbiAgcmVzZXQoKSB7XG4gICAgdGhpcy5fZm9ybS5yZXNldCgpO1xuICB9XG5cbiAgc2V0U3VibWl0QnV0dG9uVGV4dCh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhGb3JtO1xuIiwiLy8gRm9ybSBTZWxlY3RvcnNcbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm1cIik7XG5cbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGVfX2VkaXQtYnV0dG9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRJY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19jb250YWluZXJcIik7XG5cbi8vIENhcmQgU2VsZWN0b3JzXG5leHBvcnQgY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI3Byb2ZpbGVfX2FkZC1jYXJkLWJ1dHRvblwiXG4pO1xuXG4vLyBJbnB1dCBTZWxlY3RvcnNcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiW25hbWU9J25hbWUnXVwiKTtcbmV4cG9ydCBjb25zdCBhYm91dElucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIltuYW1lPSdhYm91dCddXCIpO1xuXG4vLyBDb25maWdcbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiBcIi5tb2RhbF9fYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JfdmlzaWJsZVwiLFxuICBtb2RhbFNwYW46IFwiLm1vZGFsX19zcGFuXCIsXG59O1xuIiwiLy8gaW1wb3J0IGNsYXNzZXNcbmltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xuXG4vLyBpbXBvcnQgbW9kdWxlc1xuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanNcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbWZpcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgUHJvZmlsZUVkaXRJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qcm9maWxlRWRpdEltYWdlLmpzXCI7XG5cbi8vIGltcG9ydCBjb25zdGFudHNcbmltcG9ydCB7XG4gIHByb2ZpbGVFZGl0QnV0dG9uLFxuICBmb3JtTGlzdCxcbiAgcHJvZmlsZUVkaXRJY29uLFxuICBhZGRDYXJkQnV0dG9uLFxuICBuYW1lSW5wdXQsXG4gIGFib3V0SW5wdXQsXG4gIGNvbmZpZyxcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xuXG4vLyAqIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gKiB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gSW5zdGFuY2VzIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vICogfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG4vLyBDcmVhdGUgYW4gaW5zdGFuY2Ugb2YgdGhlIEFwaSBjbGFzc1xuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQtYXBpLmVuLnRyaXBsZXRlbi1zZXJ2aWNlcy5jb20vdjFcIixcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246IFwiMWFiYmUzYmItZWM0YS00OWIxLThjYzctOTdmYjBlODMwMGE2XCIsXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gIH0sXG59KTtcblxuLy8gQ3JlYXRlIGFuIGluc3RhbmNlIG9mIHRoZSBQcm9maWxlIGNsYXNzXG5jb25zdCBwcm9maWxlID0gbmV3IFByb2ZpbGVFZGl0SW1hZ2UoXG4gIFwiLnByb2ZpbGVfX2NvbnRhaW5lclwiLFxuICBcIi5wcm9maWxlX19lZGl0LWljb25cIlxuKTtcblxuLy8gQ3JlYXRlIGluc3RhbmNlcyBvZiB0aGUgUG9wdXAgY2xhc3Nlc1xuY29uc3QgZGVsZXRlTW9kYWwgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcIiNkZWxldGVfX21vZGFsXCIsIGhhbmRsZURlbGV0ZUNsaWNrKTtcbmNvbnN0IHByb2ZpbGVJbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtaW1hZ2UtbW9kYWxcIixcbiAgaGFuZGxlUHJvZmlsZUltYWdlRm9ybVN1Ym1pdFxuKTtcbmNvbnN0IHByb2lsZUVkaXRNb2RhbCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBcIiNwcm9maWxlX19lZGl0LW1vZGFsXCIsXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XG4pO1xuY29uc3QgYWRkQ2FyZE1vZGFsID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xuY29uc3QgcHJldmlld0ltYWdlTW9kYWwgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcHJldmlld19faW1hZ2UtbW9kYWxcIik7XG5cbi8vIHNldCBldmVudCBsaXN0ZW5lcnNcbmRlbGV0ZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5wcm9maWxlSW1hZ2VNb2RhbC5zZXRFdmVudExpc3RlbmVycygpO1xucHJvaWxlRWRpdE1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5hZGRDYXJkTW9kYWwuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByb2ZpbGUuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbnByZXZpZXdJbWFnZU1vZGFsLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vIHVzZXJJbmZvIGluc3RhbmNlXG5jb25zdCB1c2VySW5mbyA9IG5ldyBVc2VySW5mbyh7XG4gIG5hbWVFbGVtZW50OiBcIiNwcm9maWxlX190aXRsZVwiLFxuICBhYm91dEVsZW1lbnQ6IFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIsXG4gIGF2YXRhckVsZW1lbnQ6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXG59KTtcblxuLy8gPyB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vID8gfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSBBUEkgLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG4vLyA/IHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gZ2V0IHVzZXIgaW5mb1xuYXBpXG4gIC5nZXRVc2VySW5mbygpXG4gIC50aGVuKCh1c2VyRGF0YSkgPT4ge1xuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcbiAgICAgIG5hbWU6IHVzZXJEYXRhLm5hbWUsXG4gICAgICBhYm91dDogdXNlckRhdGEuYWJvdXQsXG4gICAgfSk7XG4gICAgdXNlckluZm8uc2V0VXNlckF2YXRhcih7IGF2YXRhcjogdXNlckRhdGEuYXZhdGFyIH0pO1xuICB9KVxuICAuY2F0Y2goKGVycikgPT4ge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgfSk7XG5cbi8vIGdldCBpbml0aWFsIGNhcmRzXG5sZXQgY2FyZFNlY3Rpb247XG5hcGlcbiAgLmdldEluaXRpYWxDYXJkcygpXG4gIC50aGVuKChjYXJkRGF0YSkgPT4ge1xuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkRGF0YSxcbiAgICAgICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXG4gICAgICB9LFxuICAgICAgXCIjY2FyZF9fbGlzdFwiXG4gICAgKTtcblxuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpO1xuICB9KTtcblxuLy8gPyB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vID8gfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tRnVuY3Rpb24tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG4vLyA/IHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gZnVuY3Rpb24gdG8gY3JlYXRlIGEgY2FyZFxuZnVuY3Rpb24gY3JlYXRlQ2FyZChjYXJkRGF0YSkge1xuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgY2FyZERhdGEsXG4gICAgXCIjY2FyZF9fdGVtcGxhdGVcIixcbiAgICBoYW5kbGVDYXJkSW1hZ2VDbGljayxcbiAgICBoYW5kbGVEZWxldGVDbGljayxcbiAgICBoYW5kbGVMaWtlQ2xpY2tcbiAgKTtcblxuICByZXR1cm4gY2FyZC5nZXRDYXJkRWxlbWVudCgpO1xufVxuXG4vLyBmdW5jdGlvbiB0byByZW5kZXIgYSBjYXJkXG5mdW5jdGlvbiByZW5kZXJDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChjYXJkRGF0YSk7XG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xufVxuXG4vLyBmdW5jdGlvbiB0byBoYW5kbGUgY2FyZCBpbWFnZSBjbGlja1xuZnVuY3Rpb24gaGFuZGxlQ2FyZEltYWdlQ2xpY2soY2FyZERhdGEpIHtcbiAgcHJldmlld0ltYWdlTW9kYWwub3BlbihjYXJkRGF0YSk7XG59XG5cbi8vIGZ1bmN0aW9uIHRvIGhhbmRsZSBkZWxldGUgY2xpY2tcbmZ1bmN0aW9uIGhhbmRsZURlbGV0ZUNsaWNrKGNhcmQpIHtcbiAgZGVsZXRlTW9kYWwub3BlbigpO1xuXG4gIGRlbGV0ZU1vZGFsLnNldFN1Ym1pdEFjdGlvbigoKSA9PiB7XG4gICAgZGVsZXRlTW9kYWwuc2V0U3VibWl0QnV0dG9uVGV4dChcIkRlbGV0aW5nLi4uLlwiKTtcblxuICAgIGFwaVxuICAgICAgLnJlbW92ZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQuaGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgICBkZWxldGVNb2RhbC5jbG9zZSgpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pXG4gICAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGRlbGV0ZU1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJEZWxldGVcIik7XG4gICAgICB9KTtcbiAgfSk7XG59XG5cbi8vIGZ1bmN0aW9uIHRvIGhhbmRsZSBsaWtlIGNsaWNrXG5mdW5jdGlvbiBoYW5kbGVMaWtlQ2xpY2soY2FyZCkge1xuICBpZiAoY2FyZC5pc0xpa2VkKSB7XG4gICAgYXBpXG4gICAgICAuZGlzTGlrZUNhcmQoY2FyZC5faWQpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGNhcmQudG9nZ2xlTGlrZSgpO1xuICAgICAgICBjYXJkLmlzTGlrZWQgPSBmYWxzZTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxuICBpZiAoIWNhcmQuaXNMaWtlZCkge1xuICAgIGFwaVxuICAgICAgLmxpa2VDYXJkKGNhcmQuX2lkKVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcbiAgICAgICAgY2FyZC5pc0xpa2VkID0gdHJ1ZTtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICB9KTtcbiAgfVxufVxuXG4vLyAqIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gKiB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1FdmVudCBMaXN0ZW5lcnMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vICogfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG5cbi8vIHByb2ZpbGUgZWRpdCBidXR0b24gZXZlbnQgbGlzdGVuZXJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGN1cnJlbnRVc2VyID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gY3VycmVudFVzZXIubmFtZTtcbiAgYWJvdXRJbnB1dC52YWx1ZSA9IGN1cnJlbnRVc2VyLmFib3V0O1xuICBmb3JtVmFsaWRhdG9yc1tcInByb2ZpbGUtZm9ybVwiXS5yZXNldFZhbGlkYXRpb24oKTtcbiAgcHJvaWxlRWRpdE1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vLyBhZGQgY2FyZCBidXR0b24gZXZlbnQgbGlzdGVuZXJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgYWRkQ2FyZE1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vLyBwcm9maWxlIGVkaXQgaWNvbiBldmVudCBsaXN0ZW5lclxucHJvZmlsZUVkaXRJY29uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHByb2ZpbGVJbWFnZU1vZGFsLm9wZW4oKTtcbn0pO1xuXG4vLyAqIHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gKiB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1FdmVudCBIYW5kbGVyLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vICogfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG4vLyBwcm9maWxlIGltYWdlIGZvcm0gc3VibWl0IGhhbmRsZXJzXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlSW1hZ2VGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIHByb2ZpbGVJbWFnZU1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJTYXZpbmcuLi4uXCIpO1xuICBhcGlcbiAgICAuZWRpdFByb2ZpbGVJbWFnZShpbnB1dFZhbHVlcylcbiAgICAudGhlbigocmVzKSA9PiB7XG4gICAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHJlcyk7XG4gICAgICBwcm9maWxlSW1hZ2VNb2RhbC5jbG9zZSgpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNbXCJwcm9maWxlLWltYWdlLWZvcm1cIl0uZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgcHJvZmlsZUltYWdlTW9kYWwucmVzZXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwcm9maWxlSW1hZ2VNb2RhbC5zZXRTdWJtaXRCdXR0b25UZXh0KFwiU2F2ZVwiKTtcbiAgICB9KTtcbn1cblxuLy8gcHJvZmlsZSBmb3JtIHN1Ym1pdCBoYW5kbGVyc1xuZnVuY3Rpb24gaGFuZGxlUHJvZmlsZUZvcm1TdWJtaXQoaW5wdXRWYWx1ZXMpIHtcbiAgcHJvaWxlRWRpdE1vZGFsLnNldFN1Ym1pdEJ1dHRvblRleHQoXCJTYXZpbmcuLi4uXCIpO1xuXG4gIGFwaVxuICAgIC5lZGl0UHJvZmlsZSh7XG4gICAgICBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLFxuICAgICAgYWJvdXQ6IGlucHV0VmFsdWVzLmFib3V0LFxuICAgIH0pXG4gICAgLnRoZW4oKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lLCBhYm91dCB9KTtcbiAgICAgIHByb2lsZUVkaXRNb2RhbC5jbG9zZSgpO1xuICAgIH0pXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICB9KVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHByb2lsZUVkaXRNb2RhbC5zZXRTdWJtaXRCdXR0b25UZXh0KFwiU2F2ZVwiKTtcbiAgICB9KTtcbn1cblxuLy8gYWRkIGNhcmQgZm9ybSBzdWJtaXQgaGFuZGxlcnNcbmZ1bmN0aW9uIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0KGlucHV0VmFsdWVzKSB7XG4gIGFkZENhcmRNb2RhbC5zZXRTdWJtaXRCdXR0b25UZXh0KFwiU2F2aW5nLi4uLlwiKTtcblxuICBhcGlcbiAgICAuYWRkQ2FyZCh7XG4gICAgICBuYW1lOiBpbnB1dFZhbHVlcy5uYW1lLFxuICAgICAgbGluazogaW5wdXRWYWx1ZXMubGluayxcbiAgICB9KVxuICAgIC50aGVuKCh7IG5hbWUsIGxpbmssIF9pZCB9KSA9PiB7XG4gICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoeyBuYW1lLCBsaW5rLCBfaWQgfSkpO1xuICAgICAgYWRkQ2FyZE1vZGFsLmNsb3NlKCk7XG4gICAgICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtZm9ybVwiXS5kaXNhYmxlQnV0dG9uKCk7XG4gICAgICBhZGRDYXJkTW9kYWwucmVzZXQoKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBhZGRDYXJkTW9kYWwuc2V0U3VibWl0QnV0dG9uVGV4dChcIlNhdmVcIik7XG4gICAgfSk7XG59XG5cbi8vID8gfHwtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLXx8XG4vLyA/IHx8LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLUZvcm0gVmFsaWRhdGlvbi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS18fFxuLy8gPyB8fC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tfHxcbi8vIGZvcm0gdmFsaWRhdGlvblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcbmNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoZm9ybUxpc3QpID0+IHtcbiAgZm9ybUxpc3QuZm9yRWFjaCgoZm9ybUVsZW1lbnQpID0+IHtcbiAgICBjb25zdCB2YWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbGVtZW50KTtcbiAgICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xuICAgIGZvcm1WYWxpZGF0b3JzW2Zvcm1FbGVtZW50LmdldEF0dHJpYnV0ZShcIm5hbWVcIildID0gdmFsaWRhdG9yO1xuICB9KTtcbn07XG5cbmVuYWJsZVZhbGlkYXRpb24oZm9ybUxpc3QpO1xuIiwiY2xhc3MgUHJvZmlsZUVkaXRJbWFnZSB7XG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lciwgaWNvbikge1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyKTtcbiAgICB0aGlzLl9pY29uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihpY29uKTtcbiAgfVxuXG4gIHNob3dJY29uKCkge1xuICAgIHRoaXMuX2ljb24uc3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG4gIH1cblxuICBoaWRlSWNvbigpIHtcbiAgICB0aGlzLl9pY29uLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VlbnRlclwiLCB0aGlzLnNob3dJY29uLmJpbmQodGhpcykpO1xuICAgIHRoaXMuX2NvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VsZWF2ZVwiLCB0aGlzLmhpZGVJY29uLmJpbmQodGhpcykpO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFByb2ZpbGVFZGl0SW1hZ2U7XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuY2xhc3MgUG9wdXBXaXRoQ29uZmlybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHsgcG9wdXBTZWxlY3RvciB9KTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2J1dHRvblwiKTtcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihjYWxsYmFja0Z1bmN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGNhbGxiYWNrRnVuY3Rpb247XG4gIH1cblxuICBzZXRTdWJtaXRCdXR0b25UZXh0KHRleHQpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24udGV4dENvbnRlbnQgPSB0ZXh0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQoKTtcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhDb25maXJtO1xuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMucG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG4gIH1cblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gbGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX2NhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuZXhwb3J0IGRlZmF1bHQgUG9wdXBXaXRoSW1hZ2U7XG4iLCJjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgbmFtZUVsZW1lbnQsIGFib3V0RWxlbWVudCwgYXZhdGFyRWxlbWVudCB9KSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVFbGVtZW50KTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0RWxlbWVudCk7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyRWxlbWVudCk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICB0aGlzLl91c2VySW5mbyA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0RWxlbWVudC50ZXh0Q29udGVudCxcbiAgICB9O1xuICAgIHJldHVybiB0aGlzLl91c2VySW5mbztcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcbiAgICB0aGlzLl9hYm91dEVsZW1lbnQudGV4dENvbnRlbnQgPSBhYm91dDtcbiAgfVxuXG4gIHNldFVzZXJBdmF0YXIoeyBhdmF0YXIgfSkge1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjID0gYXZhdGFyO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IFVzZXJJbmZvO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwiY2FyZERhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVDYXJkSW1hZ2VDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwidGhpcyIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl9pZCIsImlzTGlrZWQiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2hhbmRsZUxpa2VDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfbGlrZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlQnV0dG9uIiwiX2NhcmRJbWFnZUVsZW1lbnQiLCJyZW5kZXJMaWtlcyIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInRvZ2dsZUxpa2UiLCJ0b2dnbGUiLCJoYW5kbGVEZWxldGVDYXJkIiwiX2NhcmRFbGVtZW50IiwiZ2V0Q2FyZEVsZW1lbnQiLCJfY2FyZFRpdGxlRWxlbWVudCIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiY29uZmlnIiwiZm9ybUVsZW1lbnQiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm1FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsImRpc2FibGVCdXR0b24iLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJfZW5hYmxlQnV0dG9uIiwiX2hhc0ludmFsaWRJbnB1dCIsImlucHV0TGlzdCIsImV2ZXJ5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJlIiwicHJldmVudERlZmF1bHQiLCJyZXNldFZhbGlkYXRpb24iLCJfcmVmIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInBvcHVwU2VsZWN0b3IiLCJwb3B1cEVsZW1lbnQiLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwib3BlbiIsImNsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImV2dCIsImtleSIsInNldEV2ZW50TGlzdGVuZXJzIiwidGFyZ2V0IiwiY29udGFpbnMiLCJQb3B1cCIsImhhbmRsZUZvcm1TdWJtaXQiLCJzdXBlciIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicmVzZXQiLCJzZXRTdWJtaXRCdXR0b25UZXh0IiwidGV4dCIsImZvcm1MaXN0IiwicHJvZmlsZUVkaXRCdXR0b24iLCJwcm9maWxlRWRpdEljb24iLCJhZGRDYXJkQnV0dG9uIiwibmFtZUlucHV0IiwiYWJvdXRJbnB1dCIsIm1vZGFsU3BhbiIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImNoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0VXNlckluZm8iLCJmZXRjaCIsInRoZW4iLCJlZGl0UHJvZmlsZSIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYWJvdXQiLCJlZGl0UHJvZmlsZUltYWdlIiwiaW5wdXRWYWx1ZXMiLCJhdmF0YXIiLCJnZXRJbml0aWFsQ2FyZHMiLCJhZGRDYXJkIiwiX3JlZjIiLCJyZW1vdmVDYXJkIiwiY2FyZElkIiwibGlrZUNhcmQiLCJkaXNMaWtlQ2FyZCIsImF1dGhvcml6YXRpb24iLCJwcm9maWxlIiwiY29udGFpbmVyIiwiaWNvbiIsIl9pY29uIiwic2hvd0ljb24iLCJzdHlsZSIsImRpc3BsYXkiLCJoaWRlSWNvbiIsImRlbGV0ZU1vZGFsIiwic2V0U3VibWl0QWN0aW9uIiwiY2FsbGJhY2tGdW5jdGlvbiIsInByb2ZpbGVJbWFnZU1vZGFsIiwiUG9wdXBXaXRoRm9ybSIsInVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImZvcm1WYWxpZGF0b3JzIiwiY2F0Y2giLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJmaW5hbGx5IiwicHJvaWxlRWRpdE1vZGFsIiwic2V0VXNlckluZm8iLCJhZGRDYXJkTW9kYWwiLCJjYXJkU2VjdGlvbiIsImNyZWF0ZUNhcmQiLCJwcmV2aWV3SW1hZ2VNb2RhbCIsIl9pbWFnZSIsIl9jYXB0aW9uIiwibmFtZUVsZW1lbnQiLCJhYm91dEVsZW1lbnQiLCJhdmF0YXJFbGVtZW50IiwiX25hbWVFbGVtZW50IiwiX2Fib3V0RWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiX3VzZXJJbmZvIiwiX3JlZjMiLCJDYXJkIiwicmVuZGVyQ2FyZCIsImNhcmRFbGVtZW50IiwiY2FyZCIsInVzZXJEYXRhIiwiU2VjdGlvbiIsImN1cnJlbnRVc2VyIiwidmFsaWRhdG9yIiwiRm9ybVZhbGlkYXRvciIsImdldEF0dHJpYnV0ZSJdLCJzb3VyY2VSb290IjoiIn0=